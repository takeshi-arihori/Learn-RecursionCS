# Server with Databases

RecursionCS バックエンドカリキュラム

## コース概要

このコースでは、データベースを使用したバックエンド開発の方法を学びます。業界標準と良いソフトウェア設計原則の適用に重点を置き、スキーマ設計、移行戦略、データアクセスと操作、インメモリキャッシング、データ層の抽象化などの詳細なトピックを扱います。学習を通じて、Pastebin、Pixiv、Twitter、Shopify などのプロジェクトを作成し、サーバがデータベースに接続するプロセスを実践します。さらに、セッションによる状態保持型のユーザー認証、JWT を使用したステートレス型のユーザー認証、ウェブセキュリティと暗号化、ミドルウェア、MVC アーキテクチャ、マイクロフレームワーク、依存関係注入、バックエンドでの OOP 設計パターンなど、広範囲な内容を学びます。このコースは大規模であり、修了後にはバックエンドエンジニアとしてのキャリアに必要な全てのスキルと強固な基礎を習得できるとされています。

## このコースで学べること

- **データベース設定、環境構築、リファクタリング、DDL と DML 操作、スキーマ管理、URL ルーティング、レンダリングなどの基本**

  - データベースの初期設定から環境構築、スキーマの設計と管理、データ定義言語（DDL）とデータ操作言語（DML）を用いたデータベース操作を学びます。また、URL ルーティングやテンプレートエンジンを使ったレンダリングも含まれます。

- **DAO パターンの理解と応用、メモリ内ストレージと memcached の使用、ORM の基本と拡張**

  - データアクセスオブジェクト（DAO）パターンの設計と実装、インメモリキャッシングと memcached を使用したキャッシュ戦略、オブジェクトリレーショナルマッピング（ORM）の基礎とその拡張について学びます。

- **クッキーとセッションの基本に焦点を当て、クッキーの使用と管理、セッションデータの操作と保持**

  - ウェブアプリケーションでのクッキーの使い方と管理、セッションデータの操作方法、セッションのライフサイクル管理について詳しく学びます。

- **セッションベースのユーザー認証、ミドルウェアの開発、CSRF 保護、ウェブセキュリティ、ステートレス認証の手法**

  - セッションを用いたユーザー認証の実装、カスタムミドルウェアの開発、クロスサイトリクエストフォージェリ（CSRF）対策、ウェブアプリケーションのセキュリティ強化、JSON Web Token（JWT）を使ったステートレス認証の方法を学びます。

- **URL 署名検証ミドルウェアを学習し、メール送信システム、SNS サービス、E コマースのサーバ実装**
  - URL 署名検証を行うミドルウェアの作成、メール送信機能の実装、ソーシャルネットワーキングサービス（SNS）や E コマースサイトのバックエンドサーバ構築に取り組みます。

このコースを通じて、データベースを使用したバックエンド開発の実践的なスキルを身につけ、実際のプロジェクトに応用できる知識と経験を得ることができます。

## 環境要件

このコースを通じて、ローカルとプロダクション環境はどちらも Ubuntu の Linux ディストリビューションであることが前提です。プロダクションは AWS EC2 インスタンスなどのクラウド VM にホストされるべきで、ローカルはローカル VM インスタンスまたはデスクトップ OS のいずれかになります。

### Docker を使用した環境構築

Docker を使用することで、以下の利点があります:

- **一貫した環境:** ローカルとプロダクション環境で同一の設定を使用できるため、一貫した動作が保証されます。
- **依存関係の管理:** 各コンテナ内で依存関係を個別に管理できるため、環境の汚染を防ぎます。
- **スケーラビリティ:** Docker Compose を使用することで、マルチコンテナアプリケーションの構築と管理が容易になります。

## 開発環境

- **Web サーバ**: Nginx 1.25.0
- **データベース**: MySQL 8.0
- **言語**: PHP 8.1

## 参考

- [参考記事](https://qiita.com/shikuno_dev/items/f236c8280bb745dd6fb4)

## プロジェクト構成

```
.
├── docker/
│ ├── mysql/
│ │ └── my.cnf
│ ├── nginx/
│ │ └── default.conf
│ └── php/
│ ├── Dockerfile
│ └── php.ini
├── src/
│    ├── index.php
├── compose.yml
└── .env
```

## セットアップ手順

### 1. リポジトリをクローン

```bash
git clone https://github.com/yourusername/yourrepository.git
cd yourrepository
```

### 2. 環境変数を設定

.env ファイルを作成し、以下の内容を追加します。

```
MYSQL_ROOT_PASSWORD=password
MYSQL_DATABASE=php-docker-db
MYSQL_USER=user
MYSQL_PASSWORD=password
PROJECT_NAME=my_project

```

### 3. Docker コンテナをビルドして起動

```
docker-compose up --build
```

### 4. phpMyAdmin にアクセス

ブラウザで http://localhost:8080 にアクセスし、以下の情報でログインします。

```
サーバ: mysql
ユーザ名: root
パスワード: .envファイルで設定したMYSQL_ROOT_PASSWORDの値（例: password）
```

## Docker 内での DB 操作

### MySQL コンテナに入る

```
docker-compose exec mysql /bin/bash
```

### MySQL にログイン

```
mysql -u root -p
```

### 注意事項

- 各プロジェクトで使用する際は、.env ファイルの内容をプロジェクトに合わせて変更してください。
- Docker Compose ファイルで定義されたボリューム名やネットワーク名もプロジェクトごとにユニークにしてください。
