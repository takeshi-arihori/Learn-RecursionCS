<?php

# 問題 タイルの数
// medium
// n × m の四角形の中に、
// 2
// i
//  ×
// 2
// i
// （
// i
// ≥
// 0
// ）のタイルを敷き詰めていくことを考えています。自然数 n、m が与えられるので、最も少ないタイルの数を返す、minTiles という関数を再帰を使って作成してください。

// 例えば、4 × 3 の四角形の中には、
// 2
// 1
//  ×
// 2
// 1
//  のタイルを 2 つ、
// 2
// 0
//  ×
// 2
// 0
//  のタイルを 4 つ敷き詰めることができます。

// 長方形の短辺に可能な限り大きい正方形のタイルを配置します。
// そのタイルで覆われなかった残りの部分に対して再帰的に同じ操作を行います。
function minTiles(int $n, int $m): int
{
	// いずれかの辺が0なら、0タイルが必要
	if ($n == 0 || $m == 0) return 0;

	// n と m 両方2で割れる場合、f(n/2, m/2)が成り立つ
	if ($n % 2 == 0 && $m % 2 == 0) return minTiles($n / 2, $m / 2);
	// n が奇数で m が偶数の場合
	else if ($n % 2 != 0 && $m % 2 == 0) return $m + minTiles(($n - 1) / 2, $m / 2);
	// n が偶数で m が奇数の場合
	else if ($n % 2 == 0 && $m % 2 != 0) return $n + minTiles($n / 2, ($m - 1) / 2);
	// n と m 両方奇数の場合
	else return $n + $m - 1 + minTiles(($n - 1) / 2, ($m - 1) / 2);
}

// テストケースを実行
echo minTiles(10, 5) . "\n";  // 出力: 14
echo minTiles(100, 7) . "\n"; // 出力: 175
echo minTiles(55, 9) . "\n";  // 出力: 75
echo minTiles(73, 8) . "\n";  // 出力: 17
echo minTiles(3, 4) . "\n";   // 出力: 6
echo minTiles(10, 10) . "\n"; // 出力: 10
